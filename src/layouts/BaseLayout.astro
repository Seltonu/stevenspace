---
import Header from "../components/header.astro";
import Footer from "../components/footer.astro";
import "../styles/global.css";
// import "../utils/global.js";
// const { title = "ssgutier" } = Astro.props;
const { title = "Steven's Space", class: className } = Astro.props;
---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href="/catgroove.webp" />
        <!-- <link rel="icon" type="image/svg+xml" href="/favicon.svg" /> -->
        <meta name="viewport" content="width=device-width">
        <meta name="generator" content={Astro.generator} />
        <title>{title}</title>
        <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script> -->
    </head>
    <body class={className}>
        <Header />
        <main>
            <slot />
            
            <img id="flowers_svg" src="/images/flowers.svg" alt="Flowers">
        </main>
        <Footer />
    </body>


</html>

<style>
main {
    /* max-height: calc(97dvh - var(--footer-height)); */
    /* min-height: 100%; */
}
ul {
    list-style-position: outside;
}
#flowers_svg {
    max-width: 32rem;
    position: fixed;
    bottom: 0;
    right: 0;
    transform: scaleX(-1);
    opacity: 0.5;
}
@media (max-width: 480px) {
    #flowers_svg {
        max-width: 25rem;
        opacity: 0.15;
    }
}
</style>

<script>
    console.log(window.location.pathname);
    if (!window.location.pathname.startsWith("/ip_block")) {
        console.log("ip blocked");
        // fetch("https://ipapi.co/json/")
        // .then(res => res.json())
        // .then(data => {
        //     console.log(data.city)
        //     if (data.city.toLowerCase() === "san jose") {
        //         window.location.href = "/ip_block"; // assuming ip_block.astro resolves here
        //     }
        // })
        // .catch(() => {
        //     // optional fallback behavior
        //     console.log("ip fetch failed");
        // });
    }
</script>
